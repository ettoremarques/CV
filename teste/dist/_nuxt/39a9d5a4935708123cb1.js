(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{394:function(t,e,r){"use strict";r.d(e,"e",(function(){return d})),r.d(e,"d",(function(){return v})),r.d(e,"b",(function(){return y})),r.d(e,"f",(function(){return x})),r.d(e,"a",(function(){return k})),r.d(e,"c",(function(){return _}));r(39);var n=r(12),o=r(34),c=r.n(o),l=r(74);function d(t){return f.apply(this,arguments)}function f(){return(f=Object(n.a)(regeneratorRuntime.mark((function t(e){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="/api/playlist/",t.prev=1,t.next=4,c.a.get(r);case 4:return n=t.sent,t.abrupt("return",n.data);case 8:t.prev=8,t.t0=t.catch(1),401===(o=Object.assign({},t.t0)).response.status&&e.logout(),l.a.trackException({exception:o,properties:{url:r}}),console.error("error loading playlists",o);case 14:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}function v(t,e){return m.apply(this,arguments)}function m(){return(m=Object(n.a)(regeneratorRuntime.mark((function t(e,r){var n,o,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/api/playlist/".concat(e),t.prev=1,t.next=4,c.a.get(n);case 4:return o=t.sent,t.abrupt("return",o.data);case 8:t.prev=8,t.t0=t.catch(1),401===(d=Object.assign({},t.t0)).response.status&&r.logout(),l.a.trackException({exception:d,properties:{url:n}}),console.error("error loading playlist ID: ".concat(e),d);case 14:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}function y(t,e){return h.apply(this,arguments)}function h(){return(h=Object(n.a)(regeneratorRuntime.mark((function t(e,r){var n,o,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/api/playlist/".concat(e),t.prev=1,t.next=4,c.a.delete(n);case 4:if(200===(o=t.sent).status||204===o.status){t.next=9;break}return t.abrupt("return","Failed to delete playlist");case 9:return t.abrupt("return","Success");case 10:t.next=18;break;case 12:t.prev=12,t.t0=t.catch(1),401===(d=Object.assign({},t.t0)).response.status&&r.logout(),l.a.trackException({exception:d,properties:{url:n}}),console.error("error deleting playlist",d);case 18:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}function x(t,e){return w.apply(this,arguments)}function w(){return(w=Object(n.a)(regeneratorRuntime.mark((function t(e,r){var n,o,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/api/playlist/".concat(e.id),t.prev=1,t.next=4,c.a.put(n,e);case 4:if(200===(o=t.sent).status||204===o.status){t.next=9;break}throw new Error("Failed to update playlist");case 9:return t.abrupt("return",o.data);case 10:t.next=18;break;case 12:t.prev=12,t.t0=t.catch(1),401===(d=Object.assign({},t.t0)).response.status&&r.logout(),l.a.trackException({exception:d,properties:{url:n}}),console.error("error updating playlist",d);case 18:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}function k(t,e){return O.apply(this,arguments)}function O(){return(O=Object(n.a)(regeneratorRuntime.mark((function t(e,r){var n,o,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/api/playlist",t.prev=1,t.next=4,c.a.post(n,e);case 4:if(201===(o=t.sent).status){t.next=9;break}throw new Error("Failed to add playlist");case 9:return t.abrupt("return",o.data);case 10:t.next=18;break;case 12:t.prev=12,t.t0=t.catch(1),401===(d=Object.assign({},t.t0)).response.status&&r.logout(),l.a.trackException({exception:d,properties:{url:n}}),console.error("error updating playlist",d);case 18:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}function _(t,e,r){return j.apply(this,arguments)}function j(){return(j=Object(n.a)(regeneratorRuntime.mark((function t(e,r,n){var o,d,f,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="/api/playlist/".concat(e,"/export"),t.prev=1,t.next=4,c.a.get(o);case 4:if(200===(d=t.sent).status||204===d.status){t.next=9;break}return t.abrupt("return","Failed to export playlist");case 9:(f=document.createElement("a")).href="data:text/csv;charset=utf-8,"+encodeURI(d.data),f.target="_blank",f.download=r+".csv",f.click(),f.remove();case 15:t.next=23;break;case 17:t.prev=17,t.t0=t.catch(1),401===(v=Object.assign({},t.t0)).response.status&&n.logout(),l.a.trackException({exception:v,properties:{url:o}}),console.error("error exporting playlist",v);case 23:case"end":return t.stop()}}),t,null,[[1,17]])})))).apply(this,arguments)}},407:function(t,e,r){"use strict";var n={name:"ConfirmationDialog",props:{cancelText:{type:String,default:"Cancel"},confirmText:{type:String,default:"OK"},dialogTitle:{type:String,default:""},dialogText:{type:String,required:!0},show:{type:Boolean,default:!1}},methods:{cancel:function(){this.$emit("dismissed",!1)},confirm:function(){this.$emit("dismissed",!0)}}},o=r(30),c=r(42),l=r.n(c),d=r(336),f=r(335),v=r(333),m=r(518),y=r(519),h=r(515),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",{attrs:{justify:"center"}},[r("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[t._v(t._s(t.dialogTitle))]),t._v(" "),r("v-card-text",[t._v(t._s(t.dialogText))]),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.cancel}},[t._v(t._s(t.cancelText))]),t._v(" "),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.confirm}},[t._v(t._s(t.confirmText))])],1)],1)],1)],1)}),[],!1,null,null,null);e.a=component.exports;l()(component,{VBtn:d.a,VCard:f.a,VCardActions:v.a,VCardText:v.b,VCardTitle:v.c,VDialog:m.a,VRow:y.a,VSpacer:h.a})},526:function(t,e,r){"use strict";r.r(e);r(13),r(7),r(5),r(4),r(11),r(24),r(39);var n=r(12),o=r(2),c=r(126),l=r(76),d=r(394),f=r(407);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var m=Object(l.a)("profile").mapState,y={name:"PlaylistsTable",components:{ConfirmationDialog:f.a},data:function(){return{headers:[{text:"Name",value:"name"},{text:"Track count",value:"trackCount"},{text:"Last Updated",value:"cosmosUpsertDate"},{text:"Actions",value:"actions",sortable:!1}],playlists:[],selectedPlaylistId:"",showDeleteConfirmation:!1,playlistToDelete:null}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},m(["culture"])),created:function(){this.load()},methods:{load:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.e)();case 2:t.playlists=e.sent,t.playlists&&t.playlists.forEach((function(e){e.trackCount=e.tracks.length,e.updatedDate=c.DateTime.fromISO(e.cosmosUpsertDate).setLocale(t.culture).toLocaleString()}));case 4:case"end":return e.stop()}}),e)})))()},rowClicked:function(t){this.selectedPlaylistId===t.id?this.selectedPlaylistId="":this.selectedPlaylistId=t.id},showEditor:function(t){},deletePlaylist:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.b)(t.playlistToDelete.id);case 3:"Success"===e.sent&&t.load(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:return e.prev=10,t.playlistToDelete=null,e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})))()},confirmDeletePlaylist:function(t){this.playlistToDelete=t,this.showDeleteConfirmation=!0},deleteConfirmation:function(t){this.showDeleteConfirmation=!1,t&&this.deletePlaylist()},exportPlaylist:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.c)(t.id,t.name);case 2:case"end":return e.stop()}}),e)})))()}}},h=r(30),x=r(42),w=r.n(x),k=r(336),O=r(524),_=r(135),j=r(515),D=r(49),P=r(419),component=Object(h.a)(y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-toolbar",{attrs:{color:"info",dark:""}},[r("v-toolbar-title",[t._v("Playlists")]),t._v(" "),r("v-spacer"),t._v(" "),r("v-btn",{attrs:{icon:"",title:"Create New Playlist"},on:{click:t.showEditor}},[r("v-icon",{attrs:{large:""}},[t._v("mdi-playlist-plus")])],1)],1),t._v(" "),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.playlists,"items-per-page":10,"single-select":!0},scopedSlots:t._u([{key:"item",fn:function(e){var n=e.item;return[r("tr",{class:t.selectedPlaylistId==n.id?"blue lighten-4":"",on:{click:function(e){return t.rowClicked(n)}}},[r("td",[t._v(t._s(n.name))]),t._v(" "),r("td",[t._v(t._s(n.trackCount))]),t._v(" "),r("td",[t._v(t._s(n.updatedDate))]),t._v(" "),r("td",{staticClass:"justify-center layout px-0"},[r("v-icon",{staticClass:"mr-2",attrs:{small:"",title:"Edit Playlist"},on:{click:function(e){return t.showEditor(n)}}},[t._v("\n            mdi-pencil\n          ")]),t._v(" "),r("v-icon",{staticClass:"mr-2",attrs:{small:"",title:"Delete Playlist"},on:{click:function(e){return t.confirmDeletePlaylist(n)}}},[t._v("\n            mdi-delete-outline\n          ")]),t._v(" "),r("v-icon",{staticClass:"mr-2",attrs:{small:"",title:"Export Playlist"},on:{click:function(e){return t.exportPlaylist(n)}}},[t._v("\n            fas fa-file-download\n          ")])],1)])]}}])}),t._v(" "),r("confirmation-dialog",{attrs:{show:t.showDeleteConfirmation,"dialog-title":"Confirm Delete","dialog-text":"Are you sure you want to delete this playlist?","confirm-text":"Delete"},on:{dismissed:t.deleteConfirmation}})],1)}),[],!1,null,"622fca73",null),C=component.exports;w()(component,{VBtn:k.a,VDataTable:O.a,VIcon:_.a,VSpacer:j.a,VToolbar:D.a,VToolbarTitle:P.a});var T={components:{PlaylistsTable:C}},E=Object(h.a)(T,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("PlaylistsTable")],1)}),[],!1,null,"100caec4",null);e.default=E.exports}}]);